"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DataLog = exports.RequestLog = exports.ErrorLog = exports.Log = exports.stringify = exports.removeDuplicates = void 0;
const tslib_1 = require("tslib");
const fs_1 = tslib_1.__importDefault(require("fs"));
const express_async_handler_1 = tslib_1.__importDefault(require("express-async-handler"));
const removeDuplicates = (...args) => {
    let tmp = [];
    for (let k of args) {
        if (tmp.includes(k))
            continue;
        tmp.push(k);
    }
    return tmp;
};
exports.removeDuplicates = removeDuplicates;
const stringify = function (line, depth = 0) {
    let ltt = Array(depth).fill("  ").join("");
    switch (typeof line) {
        case "string":
            return `"${line}"`;
        case "number":
            return line.toString();
        case "bigint":
            return line.toString();
        case "undefined":
            return "undefined";
        case "boolean":
            return line ? "true" : "false";
        case "function":
            const { name } = line;
            let lj = line
                .toString()
                .split("\n")
                .map((v) => `  ${ltt}${v}`)
                .join("\n");
            return `${name ? name : "anonymous"}:\n${lj}`;
        case "object":
            if (Array.isArray(line)) {
                return `[\n${line
                    .map((v) => `${ltt}  ${(0, exports.stringify)(v, depth++)}`)
                    .join(",\n")}\n${ltt}]`;
            }
            let jl = Object.keys(line);
            let output = `{\n${jl
                .map((v) => ` ${ltt}${v}: ${(0, exports.stringify)(line[v], depth++)},`)
                .join("\n")}\n${ltt}}`;
            return output;
        default:
            return "NotAString";
    }
};
exports.stringify = stringify;
let j = {
    ji: "hi",
    k: { a: "a", b: ["hallelujah", "you", "have", "overcome", "the", "grave"] },
};
const dev_logs = "./dev/logs";
if (!fs_1.default.existsSync(dev_logs)) {
    try {
        fs_1.default.mkdirSync(dev_logs, { recursive: true });
    }
    catch (err) { }
}
const Log = async function (line) {
    let date = Date();
    line = `${date} ${line}`;
    fs_1.default.writeFileSync(`${dev_logs}/log_.txt`, line + "\n", {
        encoding: "utf-8",
        flag: "a+",
    });
    console.log(line);
    return line;
};
exports.Log = Log;
const ErrorLog = async function (line) {
    (0, exports.Log)(`Error: ${(0, exports.stringify)(line)}`).then((v) => fs_1.default.writeFileSync(`${dev_logs}/log_errors.txt`, line + "\n", {
        encoding: "utf-8",
        flag: "a+",
    }));
};
exports.ErrorLog = ErrorLog;
exports.RequestLog = (0, express_async_handler_1.default)(async function (req, res, callNext) {
    let { originalUrl, ip, method } = req;
    res.on("finish", () => {
        const { statusCode } = res;
        (0, exports.Log)(`${statusCode}  ${method}  ${ip}  ${originalUrl}`).then((line) => {
            fs_1.default.writeFileSync(`${dev_logs}/log_requests.txt`, line + "\n", {
                encoding: "utf-8",
                flag: "a+",
            });
        });
    });
    callNext();
});
const DataLog = async function (file_name, line) {
    (0, exports.Log)(`Data Log: ${(0, exports.stringify)(line)}`).then((v) => {
        let isTextFile = file_name.endsWith(".txt");
        fs_1.default.writeFileSync(`${dev_logs}/${isTextFile ? file_name : file_name + ".txt"}`, line + "\n", {
            encoding: "utf-8",
            flag: "a+",
        });
    });
};
exports.DataLog = DataLog;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHNfMDAxLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vdXRpbHMvdXRpbHNfMDAxLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxvREFBb0I7QUFDcEIsMEZBQXdDO0FBR2pDLE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxHQUFHLElBQVcsRUFBRSxFQUFFO0lBQ2pELElBQUksR0FBRyxHQUFhLEVBQUUsQ0FBQztJQUN2QixLQUFLLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRTtRQUNsQixJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQUUsU0FBUztRQUM5QixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ2I7SUFDRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUMsQ0FBQztBQVBXLFFBQUEsZ0JBQWdCLG9CQU8zQjtBQUVLLE1BQU0sU0FBUyxHQUFHLFVBQVUsSUFBUyxFQUFFLFFBQWdCLENBQUM7SUFDN0QsSUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDM0MsUUFBUSxPQUFPLElBQUksRUFBRTtRQUNuQixLQUFLLFFBQVE7WUFDWCxPQUFPLElBQUksSUFBSSxHQUFHLENBQUM7UUFDckIsS0FBSyxRQUFRO1lBQ1gsT0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDekIsS0FBSyxRQUFRO1lBQ1gsT0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDekIsS0FBSyxXQUFXO1lBQ2QsT0FBTyxXQUFXLENBQUM7UUFDckIsS0FBSyxTQUFTO1lBQ1osT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO1FBQ2pDLEtBQUssVUFBVTtZQUNiLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7WUFD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SUFBSSxHQUFHLElBQUksRUFDWDtZQUNFLFFBQVEsRUFBRSxPQUFPO1lBQ2pCLElBQUksRUFBRSxJQUFJO1NBQ1gsQ0FDRixDQUFDO0lBQ0osQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUM7QUFmVyxRQUFBLE9BQU8sV0FlbEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XHJcbmltcG9ydCBhc2ggZnJvbSBcImV4cHJlc3MtYXN5bmMtaGFuZGxlclwiO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZUR1cGxpY2F0ZXMgPSAoLi4uYXJnczogYW55W10pID0+IHtcclxuICBsZXQgdG1wOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGZvciAobGV0IGsgb2YgYXJncykge1xyXG4gICAgaWYgKHRtcC5pbmNsdWRlcyhrKSkgY29udGludWU7XHJcbiAgICB0bXAucHVzaChrKTtcclxuICB9XHJcbiAgcmV0dXJuIHRtcDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzdHJpbmdpZnkgPSBmdW5jdGlvbiAobGluZTogYW55LCBkZXB0aDogbnVtYmVyID0gMCk6IHN0cmluZyB7XHJcbiAgbGV0IGx0dCA9IEFycmF5KGRlcHRoKS5maWxsKFwiICBcIikuam9pbihcIlwiKTtcclxuICBzd2l0Y2ggKHR5cGVvZiBsaW5lKSB7XHJcbiAgICBjYXNlIFwic3RyaW5nXCI6XHJcbiAgICAgIHJldHVybiBgXCIke2xpbmV9XCJgO1xyXG4gICAgY2FzZSBcIm51bWJlclwiOlxyXG4gICAgICByZXR1cm4gbGluZS50b1N0cmluZygpO1xyXG4gICAgY2FzZSBcImJpZ2ludFwiOlxyXG4gICAgICByZXR1cm4gbGluZS50b1N0cmluZygpO1xyXG4gICAgY2FzZSBcInVuZGVmaW5lZFwiOlxyXG4gICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcclxuICAgIGNhc2UgXCJib29sZWFuXCI6XHJcbiAgICAgIHJldHVybiBsaW5lID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XHJcbiAgICBjYXNlIFwiZnVuY3Rpb25cIjpcclxuICAgICAgY29uc3QgeyBuYW1lIH0gPSBsaW5lO1xyXG4gICAgICBsZXQgbGogPSBsaW5lXHJcbiAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAuc3BsaXQoXCJcXG5cIilcclxuICAgICAgICAubWFwKCh2OiBzdHJpbmcpID0+IGAgICR7bHR0fSR7dn1gKVxyXG4gICAgICAgIC5qb2luKFwiXFxuXCIpO1xyXG4gICAgICByZXR1cm4gYCR7bmFtZSA/IG5hbWUgOiBcImFub255bW91c1wifTpcXG4ke2xqfWA7XHJcbiAgICBjYXNlIFwib2JqZWN0XCI6XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGxpbmUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGBbXFxuJHtsaW5lXHJcbiAgICAgICAgICAubWFwKCh2KSA9PiBgJHtsdHR9ICAke3N0cmluZ2lmeSh2LCBkZXB0aCsrKX1gKVxyXG4gICAgICAgICAgLmpvaW4oXCIsXFxuXCIpfVxcbiR7bHR0fV1gO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBqbCA9IE9iamVjdC5rZXlzKGxpbmUpO1xyXG5cclxuICAgICAgbGV0IG91dHB1dCA9IGB7XFxuJHtqbFxyXG4gICAgICAgIC5tYXAoKHYpID0+IGAgJHtsdHR9JHt2fTogJHtzdHJpbmdpZnkobGluZVt2XSwgZGVwdGgrKyl9LGApXHJcbiAgICAgICAgLmpvaW4oXCJcXG5cIil9XFxuJHtsdHR9fWA7XHJcbiAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gXCJOb3RBU3RyaW5nXCI7XHJcbiAgfVxyXG59O1xyXG5cclxubGV0IGogPSB7XHJcbiAgamk6IFwiaGlcIixcclxuICBrOiB7IGE6IFwiYVwiLCBiOiBbXCJoYWxsZWx1amFoXCIsIFwieW91XCIsIFwiaGF2ZVwiLCBcIm92ZXJjb21lXCIsIFwidGhlXCIsIFwiZ3JhdmVcIl0gfSxcclxufTtcclxuXHJcbmNvbnN0IGRldl9sb2dzID0gXCIuL2Rldi9sb2dzXCI7XHJcblxyXG5pZiAoIWZzLmV4aXN0c1N5bmMoZGV2X2xvZ3MpKSB7XHJcbiAgdHJ5IHtcclxuICAgIGZzLm1rZGlyU3luYyhkZXZfbG9ncywgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7fVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTG9nID0gYXN5bmMgZnVuY3Rpb24gKGxpbmU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgbGV0IGRhdGUgPSBEYXRlKCk7XHJcbiAgbGluZSA9IGAke2RhdGV9ICR7bGluZX1gO1xyXG4gIGZzLndyaXRlRmlsZVN5bmMoYCR7ZGV2X2xvZ3N9L2xvZ18udHh0YCwgbGluZSArIFwiXFxuXCIsIHtcclxuICAgIGVuY29kaW5nOiBcInV0Zi04XCIsXHJcbiAgICBmbGFnOiBcImErXCIsXHJcbiAgfSk7XHJcbiAgY29uc29sZS5sb2cobGluZSk7XHJcbiAgcmV0dXJuIGxpbmU7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgRXJyb3JMb2cgPSBhc3luYyBmdW5jdGlvbiAobGluZTogc3RyaW5nIHwgRXJyb3IpIHtcclxuICBMb2coYEVycm9yOiAke3N0cmluZ2lmeShsaW5lKX1gKS50aGVuKCh2KSA9PlxyXG4gICAgZnMud3JpdGVGaWxlU3luYyhgJHtkZXZfbG9nc30vbG9nX2Vycm9ycy50eHRgLCBsaW5lICsgXCJcXG5cIiwge1xyXG4gICAgICBlbmNvZGluZzogXCJ1dGYtOFwiLFxyXG4gICAgICBmbGFnOiBcImErXCIsXHJcbiAgICB9KVxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgUmVxdWVzdExvZyA9IGFzaChhc3luYyBmdW5jdGlvbiAoXHJcbiAgcmVxOiBleHByZXNzLlJlcXVlc3QsXHJcbiAgcmVzOiBleHByZXNzLlJlc3BvbnNlLFxyXG4gIGNhbGxOZXh0OiBleHByZXNzLk5leHRGdW5jdGlvblxyXG4pIHtcclxuICBsZXQgeyBvcmlnaW5hbFVybCwgaXAsIG1ldGhvZCB9ID0gcmVxO1xyXG4gIHJlcy5vbihcImZpbmlzaFwiLCAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHN0YXR1c0NvZGUgfSA9IHJlcztcclxuICAgIExvZyhgJHtzdGF0dXNDb2RlfSAgJHttZXRob2R9ICAke2lwfSAgJHtvcmlnaW5hbFVybH1gKS50aGVuKFxyXG4gICAgICAobGluZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhgJHtkZXZfbG9nc30vbG9nX3JlcXVlc3RzLnR4dGAsIGxpbmUgKyBcIlxcblwiLCB7XHJcbiAgICAgICAgICBlbmNvZGluZzogXCJ1dGYtOFwiLFxyXG4gICAgICAgICAgZmxhZzogXCJhK1wiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH0pO1xyXG4gIGNhbGxOZXh0KCk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IERhdGFMb2cgPSBhc3luYyBmdW5jdGlvbiAoXHJcbiAgZmlsZV9uYW1lOiBzdHJpbmcsXHJcbiAgbGluZTogc3RyaW5nIHwgRXJyb3JcclxuKSB7XHJcbiAgTG9nKGBEYXRhIExvZzogJHtzdHJpbmdpZnkobGluZSl9YCkudGhlbigodikgPT4ge1xyXG4gICAgbGV0IGlzVGV4dEZpbGUgPSBmaWxlX25hbWUuZW5kc1dpdGgoXCIudHh0XCIpO1xyXG4gICAgZnMud3JpdGVGaWxlU3luYyhcclxuICAgICAgYCR7ZGV2X2xvZ3N9LyR7aXNUZXh0RmlsZSA/IGZpbGVfbmFtZSA6IGZpbGVfbmFtZSArIFwiLnR4dFwifWAsXHJcbiAgICAgIGxpbmUgKyBcIlxcblwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgZW5jb2Rpbmc6IFwidXRmLThcIixcclxuICAgICAgICBmbGFnOiBcImErXCIsXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfSk7XHJcbn07XHJcbiJdfQ==